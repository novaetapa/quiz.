<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treinamento de Contabilidade</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1, h2, h3 {
            text-align: center;
        }
        .question, .personal-info {
            margin-bottom: 15px;
        }
        .question label, .personal-info label {
            display: block;
            margin-bottom: 5px;
        }
        .question input[type="radio"], .personal-info input[type="text"] {
            margin-right: 10px;
        }
        button {
            display: inline-block;
            width: 48%;
            padding: 10px;
            margin: 5px 1%;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button.reset-btn {
            background-color: #f44336;
        }
        button:disabled {
            background-color: #ccc;
        }
        .hidden {
            display: none;
        }
        .correct {
            background-color: #d4edda;
        }
        .incorrect {
            background-color: #f8d7da;
        }

        /* Estilos responsivos para dispositivos móveis */
        @media (max-width: 768px) {
            .container {
                width: 95%;
                padding: 10px;
            }
            h1, h2, h3 {
                font-size: 1.2em;
            }
            table {
                font-size: 0.9em;
                width: 100%;
                display: block;
                overflow-x: auto; /* Scroll horizontal para tabelas grandes */
                white-space: nowrap; /* Evita quebra de linha nas células */
            }
            th, td {
                padding: 8px;
            }
            button {
                width: 100%; /* Botões ocupam a largura total no celular */
                margin-bottom: 10px;
            }
        }

        /* Estilos adicionais para dispositivos ainda menores */
        @media (max-width: 480px) {
            h1, h2, h3 {
                font-size: 1.1em;
            }
            table {
                font-size: 0.8em;
            }
            th, td {
                padding: 6px;
            }
        }
    </style>
</head>
<body>

    <!-- Parte 1: Explicações -->
    <div class="container" id="quiz-area">
        <h1>Bem-vindo ao Treinamento de Contabilidade</h1>
        <h2>Registro do Aluno</h2>

        <!-- Solicitação de Nome e Turma -->
        <form id="quiz-form">
            <div class="personal-info">
                <label for="name">Por favor, insira seu nome:</label>
                <input type="text" id="name" name="name" required placeholder="Seu nome">

                <label for="turma">Turma à qual você pertence:</label>
                <input type="text" id="turma" name="turma" required placeholder="Sua turma">
            </div>

            <!-- Atividade 1: Terminologia de Custos -->
            <div class="question">
                <h3>Atividade: Terminologia de Custos</h3>

                <p>1. Qual dos seguintes termos é utilizado para descrever o pagamento realizado como resultado de uma aquisição de bens ou serviços?</p>
                <input type="radio" name="q1" value="Desembolso" required> Desembolso<br>
                <input type="radio" name="q1" value="Gasto"> Gasto<br>

                <p>2. Qual é o termo que se refere à compra de um produto ou serviço que gera um sacrifício financeiro para a entidade?</p>
                <input type="radio" name="q2" value="Perda" required> Perda<br>
                <input type="radio" name="q2" value="Despesa"> Despesa<br>
                <input type="radio" name="q2" value="Gasto"> Gasto<br>
                <input type="radio" name="q2" value="Desembolso"> Desembolso<br>

                <p>3. A aquisição de uma máquina que será utilizada por vários anos na produção é considerada:</p>
                <input type="radio" name="q3" value="Despesa" required> Despesa<br>
                <input type="radio" name="q3" value="Custo"> Custo<br>
                <input type="radio" name="q3" value="Investimento"> Investimento<br>
                <input type="radio" name="q3" value="Perda"> Perda<br>
            </div>

            <!-- Atividade 2: Classificação de Custos Direto ou Indireto -->
            <div class="question">
                <h3>Classifique em Custo Direto ou Indireto</h3>

                <p>4. O salário dos funcionários da produção é considerado um:</p>
                <input type="radio" name="q4" value="Custo Direto" required> Custo Direto<br>
                <input type="radio" name="q4" value="Custo Indireto"> Custo Indireto<br>

                <p>5. O aluguel da fábrica é considerado um:</p>
                <input type="radio" name="q5" value="Custo Direto" required> Custo Direto<br>
                <input type="radio" name="q5" value="Custo Indireto"> Custo Indireto<br>
            </div>

            <!-- Atividade 3: Classificação de Custos Fixo ou Variável -->
            <div class="question">
                <h3>Classifique em Custo Fixo ou Variável</h3>

                <p>6. O custo com matéria-prima é considerado um:</p>
                <input type="radio" name="q6" value="Custo Fixo" required> Custo Fixo<br>
                <input type="radio" name="q6" value="Custo Variável"> Custo Variável<br>

                <p>7. O aluguel do prédio onde a fábrica opera é considerado um:</p>
                <input type="radio" name="q7" value="Custo Fixo" required> Custo Fixo<br>
                <input type="radio" name="q7" value="Custo Variável"> Custo Variável<br>
            </div>

            <!-- Atividade 4: Estudo de Caso - Cálculo da Margem Direta -->
            <div class="question">
                <h3>Estudo de Caso: Cálculo da Margem Direta</h3>
                <p>Uma empresa fabrica um produto com os seguintes dados:</p>
                <ul>
                    <li>Preço de venda por unidade: R$ 100</li>
                    <li>Custo direto por unidade: R$ 40</li>
                </ul>

                <p>8. Qual é a margem direta por unidade?</p>
                <input type="radio" name="q8" value="R$ 60" required> R$ 60<br>
                <input type="radio" name="q8" value="R$ 40"> R$ 40<br>
                <input type="radio" name="q8" value="R$ 100"> R$ 100<br>

                <!-- Botões de Envio e Reset -->
                <button type="submit" id="submit-btn">Enviar Respostas</button>
                <button type="reset" class="reset-btn">Resetar</button>
            </div>
        </form>
    </div>

    <!-- Área do Professor -->
    <div class="container">
        <h2>Área do Professor</h2>
        <label for="professor-password">Senha do Professor:</label>
        <input type="password" id="professor-password" placeholder="Digite a senha"><br><br>
        <button id="professor-access-btn">Acessar Dados dos Alunos</button>
    </div>

    <!-- Tabela de Resultados -->
    <div class="container hidden" id="professor-area">
        <h3>Resultados dos Alunos</h3>
        <table id="results-table" border="1">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Turma</th>
                    <th>Q1</th>
                    <th>Q2</th>
                    <th>Q3</th>
                    <th>Q4</th>
                    <th>Q5</th>
                    <th>Q6</th>
                    <th>Q7</th>
                    <th>Q8</th>
                </tr>
            </thead>
            <tbody>
                <!-- Os dados serão carregados aqui -->
            </tbody>
        </table>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCX8wBQ86GRksCLM-3jTUoxNicGxeU1k9U",
            authDomain: "teste2-c9a3e.firebaseapp.com",
            projectId: "teste2-c9a3e",
            storageBucket: "teste2-c9a3e.appspot.com",
            messagingSenderId: "821106776933",
            appId: "1:821106776933:web:1b7451528f1807f94e1f8c"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Botão de Acesso do Professor
        const professorAccessBtn = document.getElementById("professor-access-btn");
        const professorPassword = document.getElementById("professor-password");
        const professorArea = document.getElementById("professor-area");

        // Verificação de senha e exibição de dados dos alunos
        professorAccessBtn.addEventListener("click", async () => {
            const password = professorPassword.value;
            if (password === "135") {  // Verifica se a senha está correta
                professorArea.classList.remove("hidden");  // Mostra a área de resultados
                await fetchResults();  // Busca os resultados no Firestore
            } else {
                alert("Senha incorreta!");  // Alerta se a senha estiver errada
            }
        });

        // Função para buscar e exibir os resultados dos alunos no Firestore
        async function fetchResults() {
            const querySnapshot = await getDocs(collection(db, "quizResponses"));
            const resultsTable = document.getElementById("results-table").getElementsByTagName('tbody')[0];
            resultsTable.innerHTML = "";  // Limpa a tabela antes de adicionar os resultados

            querySnapshot.forEach((doc) => {
                const data = doc.data();
                const row = resultsTable.insertRow();

                row.insertCell(0).innerText = data.name;
                row.insertCell(1).innerText = data.turma;
                row.insertCell(2).innerText = data.q1 || "Sem resposta";
                row.insertCell(3).innerText = data.q2 || "Sem resposta";
                row.insertCell(4).innerText = data.q3 || "Sem resposta";
                row.insertCell(5).innerText = data.q4 || "Sem resposta";
                row.insertCell(6).innerText = data.q5 || "Sem resposta";
                row.insertCell(7).innerText = data.q6 || "Sem resposta";
                row.insertCell(8).innerText = data.q7 || "Sem resposta";
                row.insertCell(9).innerText = data.q8 || "Sem resposta";
            });
        }
    </script>

</body>
</html>
